[gd_scene load_steps=15 format=4 uid="uid://cb0pi3jpy83iu"]

[ext_resource type="PackedScene" uid="uid://bh8jf4ley7tw5" path="res://tilemaps/ground.tscn" id="1_2m8yi"]
[ext_resource type="PackedScene" uid="uid://bvvlp1s3e87dj" path="res://tilemaps/scenes.tscn" id="2_qv2r3"]
[ext_resource type="PackedScene" uid="uid://bxl2ccdf31g4r" path="res://head.tscn" id="3_3i20d"]
[ext_resource type="PackedScene" uid="uid://c74k00wdcpco0" path="res://chicken.tscn" id="4_1tslf"]
[ext_resource type="PackedScene" uid="uid://dp0l7ck638dt8" path="res://gate.tscn" id="4_mr3nd"]
[ext_resource type="PackedScene" uid="uid://dlee7qqkhtk3v" path="res://clouds.tscn" id="5_7fav6"]
[ext_resource type="PackedScene" uid="uid://ces54b8befns" path="res://button.tscn" id="5_qcqcb"]
[ext_resource type="PackedScene" uid="uid://0eob1v8xpjxi" path="res://background.tscn" id="8_xdp5w"]

[sub_resource type="Shader" id="Shader_63u86"]
code = "shader_type canvas_item;

void vertex() {
	// Called for every vertex the material is visible on.
}

void fragment() {
	COLOR.rgb *= 1.0;
}

//void light() {
	// Called for every pixel for every light affecting the CanvasItem.
	// Uncomment to replace the default light processing function with this one.
//}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pf5tg"]
shader = SubResource("Shader_63u86")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6krh5"]

[sub_resource type="GDScript" id="GDScript_eei3c"]
script/source = "extends Node2D


const CLOUD = preload(\"res://clouds.tscn\")
var spawnpos = 0


func _ready() -> void:
	for i in get_children():
		if(i is not Timer):
			i.show()

func _physics_process(delta: float) -> void:
	for i in get_children():
		if(i is not Timer):
			i.position.x -= delta * 10

func _on_timer_timeout() -> void:
	spawnpos = randf_range(100,650)
	var part = CLOUD.instantiate()
	part.global_position.x = 1300
	part.global_position.y = spawnpos
	var dist = max(0.2,randf() * 2)
	#part.scale = Vector2(dist,dist) / 2
	#part.modulate.a = dist / 10.0 + 2/10.0
	part.z_index = -dist * 100
	add_child(part)
	
"

[sub_resource type="Shader" id="Shader_3bkkq"]
code = "shader_type canvas_item;


uniform sampler2D noise : repeat_enable;

void vertex() {
	// Called for every vertex the material is visible on.
}

void fragment() {
	float off = texture(noise,UV + vec2(-TIME/4.3,0)).r;
	
	COLOR.rgb = vec3(off + 0.4);
}

//void light() {
	// Called for every pixel for every light affecting the CanvasItem.
	// Uncomment to replace the default light processing function with this one.
//}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qf070"]
shader = SubResource("Shader_3bkkq")

[node name="Node2D" type="Node2D"]

[node name="Node2D" type="Node2D" parent="."]
material = SubResource("ShaderMaterial_pf5tg")

[node name="ground" parent="Node2D" instance=ExtResource("1_2m8yi")]
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAA0AAAACAAEAABACAA0AAAADAAAAAAAEAA0AAAADAAAAAAAQAAwAAAACAAAAAAADAA0AAAACAAIAAAAFAA0AAAACAAIAAAAHAA8AAAAAAAEAAAAHABAAAAAAAAAAAAAHABEAAAAAAAAAAAAHABIAAAAAAAAAAAAHABMAAAAAAAAAAAAHABQAAAAAAAAAAAAHABUAAAAAAAAAAAAIABQAAAAAAAAAAAAIABUAAAAAAAAAAAAJABQAAAAAAAAAAAAJABUAAAAAAAAAAAAKABQAAAAAAAAAAAAKABUAAAAAAAAAAAALABQAAAAAAAAAAAALABUAAAAAAAAAAAAMABQAAAAAAAAAAAAMABUAAAAAAAAAAAANABQAAAAAAAAAAAANABUAAAAAAAAAAAAOABQAAAAAAAAAAAAOABUAAAAAAAAAAAAPABQAAAAAAAAAAAAPABUAAAAAAAAAAAAeAP7/AAAAAAAAAAAeAP//AAAAAAAAAAAeAAAAAAAAAAAAAAAeAAEAAAAAAAAAAAAeAAIAAAAAAAAAAAAgAP7/AAAAAAAAAAAgAP//AAAAAAAAAAAgAAAAAAAAAAAAAAAgAAEAAAAAAAAAAAAgAAIAAAAAAAAAAAAgAAMAAAAAAAAAAAAhAP7/AAAAAAAAAAAhAP//AAAAAAAAAAAhAAAAAAAAAAAAAAAhAAEAAAAAAAAAAAAhAAIAAAAAAAAAAAAhAAMAAAAAAAAAAAAiAP7/AAAAAAAAAAAiAP//AAAAAAAAAAAiAAAAAAAAAAAAAAAiAAEAAAAAAAAAAAAiAAIAAAAAAAAAAAAiAAMAAAAAAAAAAAAbAAQAAAAAAAAAAAAcAAQAAAAAAAAAAAAdAAQAAAAAAAAAAAAeAAQAAAAAAAAAAAAeAAUAAAAAAAAAAAAeAAYAAAAAAAAAAAAeAAcAAAACAAEAAAAgAAQAAAAAAAAAAAAgAAUAAAAAAAAAAAAgAAYAAAAAAAAAAAAgAAcAAAAAAAAAAAAhAAQAAAAAAAAAAAAhAAUAAAAAAAAAAAAhAAYAAAAAAAAAAAAhAAcAAAAAAAAAAAAiAAQAAAAAAAAAAAAiAAUAAAAAAAAAAAAiAAYAAAAAAAAAAAAiAAcAAAAAAAAAAAAjAAQAAAAAAAAAAAAjAAUAAAAAAAAAAAAjAAYAAAAAAAAAAAAjAAcAAAAAAAAAAAAgAAgAAAAAAAAAAAAgAAkAAAAAAAAAAAAhAAgAAAAAAAAAAAAhAAkAAAAAAAAAAAAiAAgAAAAAAAAAAAAiAAkAAAAAAAAAAAAjAAgAAAAAAAAAAAAjAAkAAAAAAAAAAAAkAAgAAAAAAAAAAAAkAAkAAAAAAAAAAAAgAAoAAAAAAAAAAAAgAAsAAAAAAAAAAAAhAAoAAAAAAAAAAAAhAAsAAAAAAAAAAAAiAAoAAAAAAAAAAAAiAAsAAAAAAAAAAAAjAAoAAAAAAAAAAAAjAAsAAAAAAAAAAAAkAAoAAAAAAAAAAAAkAAsAAAAAAAAAAAAlAAoAAAAAAAAAAAAlAAsAAAAAAAAAAAAMAA8AAAABAAAAAAAMABAAAAAAAAAAAAAMABEAAAAAAAAAAAAMABIAAAAAAAAAAAAMABMAAAAAAAAAAAANAA8AAAAAAAEAAAANABAAAAAAAAAAAAANABEAAAAAAAAAAAANABIAAAAAAAAAAAANABMAAAAAAAAAAAAOAAQAAAABAAAAAAAOAAYAAAABAAEAAAAOAA8AAAABAAEAAAAOABAAAAAAAAAAAAAOABEAAAAAAAAAAAAOABIAAAAAAAAAAAAOABMAAAAAAAAAAAAPAA8AAAAAAAEAAAAPABAAAAAAAAAAAAAPABEAAAAAAAAAAAAPABIAAAAAAAAAAAAPABMAAAAAAAAAAAAQAAcAAAABAAEAAAAQAA8AAAACAAAAAAAQABAAAAAAAAAAAAAQABEAAAAAAAAAAAAQABIAAAAAAAAAAAAQABMAAAAAAAAAAAARAAMAAAACAAAAAAARAAcAAAABAAAAAAARAA8AAAACAAAAAAARABAAAAAAAAAAAAARABEAAAAAAAAAAAARABIAAAAAAAAAAAARABMAAAAAAAAAAAASAAMAAAAAAAEAAAASAAcAAAABAAAAAAASAAoAAAABAAAAAAASAA8AAAABAAAAAAASABAAAAAAAAAAAAASABEAAAAAAAAAAAASABIAAAAAAAAAAAASABMAAAAAAAAAAAATAAMAAAAAAAEAAAATAAoAAAABAAEAAAATAA8AAAACAAAAAAATABAAAAAAAAAAAAATABEAAAAAAAAAAAATABIAAAAAAAAAAAATABMAAAAAAAAAAAAUAAoAAAAAAAEAAAAYAAMAAAABAAEAAAAZAAMAAAABAAAAAAAaAAMAAAACAAAAAAAbAAMAAAAAAAEAAAAcAAMAAAAAAAEAAAAdAAMAAAABAAAAAAAeAAMAAAAAAAAAAAAcAAUAAAAAAAAAAAAcAAYAAAACAAIAAAAdAAUAAAAAAAAAAAAdAAYAAAADAAAAAAAaAAQAAAAAAAAAAAAIAA8AAAABAAAAAAAIABAAAAAAAAAAAAAIABEAAAAAAAAAAAAJAA8AAAACAAAAAAAJABAAAAAAAAAAAAAJABEAAAAAAAAAAAAKAA8AAAAAAAEAAAAKABAAAAAAAAAAAAAKABEAAAAAAAAAAAAIABIAAAAAAAAAAAAIABMAAAAAAAAAAAAJABIAAAAAAAAAAAAJABMAAAAAAAAAAAAKABIAAAAAAAAAAAAKABMAAAAAAAAAAAALAA8AAAABAAEAAAALABAAAAAAAAAAAAALABEAAAAAAAAAAAALABIAAAAAAAAAAAALABMAAAAAAAAAAAAQABQAAAAAAAAAAAAQABUAAAAAAAAAAAARABQAAAAAAAAAAAARABUAAAAAAAAAAAASABQAAAAAAAAAAAASABUAAAAAAAAAAAATABQAAAAAAAAAAAATABUAAAAAAAAAAAAZAA8AAAACAAAAAAAZABAAAAAAAAAAAAAZABEAAAAAAAAAAAAZABIAAAAAAAAAAAAZABMAAAAAAAAAAAAZABQAAAAAAAAAAAAaAA8AAAAAAAEAAAAaABAAAAAAAAAAAAAaABEAAAAAAAAAAAAaABIAAAAAAAAAAAAaABMAAAAAAAAAAAAaABQAAAAAAAAAAAAbAA8AAAABAAAAAAAbABAAAAAAAAAAAAAbABEAAAAAAAAAAAAbABIAAAAAAAAAAAAbABMAAAAAAAAAAAAbABQAAAAAAAAAAAAcAA8AAAABAAEAAAAcABAAAAAAAAAAAAAcABEAAAAAAAAAAAAcABIAAAAAAAAAAAAcABMAAAAAAAAAAAAcABQAAAAAAAAAAAAdAA8AAAABAAAAAAAdABAAAAAAAAAAAAAdABEAAAAAAAAAAAAdABIAAAAAAAAAAAAdABMAAAAAAAAAAAAdABQAAAAAAAAAAAAeAA8AAAABAAAAAAAeABAAAAAAAAAAAAAeABEAAAAAAAAAAAAeABIAAAAAAAAAAAAeABMAAAAAAAAAAAAeABQAAAAAAAAAAAAfAA8AAAABAAAAAAAfABAAAAAAAAAAAAAfABEAAAAAAAAAAAAfABIAAAAAAAAAAAAfABMAAAAAAAAAAAAfABQAAAAAAAAAAAAgAA8AAAAAAAEAAAAgABAAAAAAAAAAAAAgABEAAAAAAAAAAAAgABIAAAAAAAAAAAAgABMAAAAAAAAAAAAgABQAAAAAAAAAAAAhAA8AAAABAAEAAAAhABAAAAAAAAAAAAAhABEAAAAAAAAAAAAhABIAAAAAAAAAAAAhABMAAAAAAAAAAAAhABQAAAAAAAAAAAAiAA8AAAABAAEAAAAiABAAAAAAAAAAAAAiABEAAAAAAAAAAAAiABIAAAAAAAAAAAAiABMAAAAAAAAAAAAiABQAAAAAAAAAAAAjAA8AAAAAAAEAAAAjABAAAAAAAAAAAAAjABEAAAAAAAAAAAAjABIAAAAAAAAAAAAjABMAAAAAAAAAAAAjABQAAAAAAAAAAAAkAA8AAAAAAAEAAAAkABAAAAAAAAAAAAAkABEAAAAAAAAAAAAkABIAAAAAAAAAAAAkABMAAAAAAAAAAAAkABQAAAAAAAAAAAAlAA8AAAAAAAEAAAAlABAAAAAAAAAAAAAlABEAAAAAAAAAAAAlABIAAAAAAAAAAAAlABMAAAAAAAAAAAAlABQAAAAAAAAAAAAmAA8AAAABAAAAAAAmABAAAAAAAAAAAAAmABEAAAAAAAAAAAAmABIAAAAAAAAAAAAmABMAAAAAAAAAAAAmABQAAAAAAAAAAAAnAA8AAAABAAEAAAAnABAAAAAAAAAAAAAnABEAAAAAAAAAAAAnABIAAAAAAAAAAAAnABMAAAAAAAAAAAAnABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAkAAAADAAAAAAAAAAsAAAAAAAAAAAAAAA8AAAAAAAAAAAAAABAAAAAAAAAAAAAAABEAAAAAAAAAAAAAABIAAAAAAAAAAAAAABMAAAAAAAAAAAAAABQAAAAAAAAAAAAAABUAAAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAABAAYAAAAAAAAAAAABAAcAAAAAAAAAAAABAAgAAAAAAAAAAAABAAkAAAADAAAAAAABAAsAAAADAAAAAAABAA8AAAABAAEAAAABABAAAAAAAAAAAAABABEAAAAAAAAAAAABABIAAAAAAAAAAAABABMAAAAAAAAAAAABABQAAAAAAAAAAAABABUAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAACAAcAAAAAAAAAAAACAAgAAAAAAAAAAAACAAkAAAACAAIAAAACAAsAAAADAAAAAAACAA8AAAAAAAEAAAACABAAAAAAAAAAAAACABEAAAAAAAAAAAACABIAAAAAAAAAAAACABMAAAAAAAAAAAACABQAAAAAAAAAAAACABUAAAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAAAAAADAAgAAAAAAAAAAAADAAkAAAADAAAAAAADAA8AAAABAAEAAAADABAAAAAAAAAAAAADABEAAAAAAAAAAAADABIAAAAAAAAAAAADABMAAAAAAAAAAAADABQAAAAAAAAAAAADABUAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAAEAAQAAAAAAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAAAAAAAAAAEAAcAAAAAAAAAAAAEAAgAAAAAAAAAAAAEAAkAAAADAAAAAAAEAA8AAAAAAAEAAAAEABAAAAAAAAAAAAAEABEAAAAAAAAAAAAEABIAAAAAAAAAAAAEABMAAAAAAAAAAAAEABQAAAAAAAAAAAAEABUAAAAAAAAAAAAFAAYAAAAAAAAAAAAFAAcAAAAAAAAAAAAFAAgAAAAAAAAAAAAFAAkAAAAAAAAAAAAFAAoAAAAAAAAAAAAFAAsAAAAAAAAAAAAFAA8AAAAAAAEAAAAFABAAAAAAAAAAAAAFABEAAAAAAAAAAAAFABIAAAAAAAAAAAAFABMAAAAAAAAAAAAFABQAAAAAAAAAAAAFABUAAAAAAAAAAAAGAA8AAAAAAAEAAAAGABAAAAAAAAAAAAAGABEAAAAAAAAAAAAGABIAAAAAAAAAAAAGABMAAAAAAAAAAAAGABQAAAAAAAAAAAAGABUAAAAAAAAAAAAAAAwAAAACAAEAABAAAA4AAAACAAEAABADAAsAAAADAAAAAAAFAAAAAAACAAEAABAFAAEAAAACAAEAABAFAAIAAAAAAAIAABAFAAMAAAAAAAIAABAFAAQAAAACAAEAABAFAAUAAAACAAEAABAFAAwAAAAAAAAAAAAGAAYAAAABAAIAABAGAAcAAAAAAAIAABAGAAgAAAACAAEAABAGAAkAAAACAAEAABAGAAoAAAACAAEAABAGAAsAAAAAAAIAABAUAAMAAAABAAAAAAASAAsAAAADAAAAAAAUAAsAAAADAAAAAAATAAsAAAACAAIAAAAbAAUAAAAAAAAAAAAbAAYAAAACAAEAAAAaAAUAAAACAAIAAAAZAAQAAAAAAAAAAAAYAAQAAAACAAEAAAAZAAUAAAACAAEAAAAGAAwAAAACAAEAABAjAAMAAAAAAAAAAAAeAPz/AAAAAAAAAAAeAP3/AAAAAAAAAAAgAPz/AAAAAAAAAAAgAP3/AAAAAAAAAAAhAPz/AAAAAAAAAAAhAP3/AAAAAAAAAAAiAPz/AAAAAAAAAAAiAP3/AAAAAAAAAAAjAPz/AAAAAAAAAAAjAP3/AAAAAAAAAAAjAP7/AAAAAAAAAAAjAP//AAAAAAAAAAAjAAAAAAAAAAAAAAAjAAEAAAAAAAAAAAAjAAIAAAAAAAAAAAAkAPz/AAAAAAAAAAAkAP3/AAAAAAAAAAAkAP7/AAAAAAAAAAAkAP//AAAAAAAAAAAkAAAAAAAAAAAAAAAkAAEAAAAAAAAAAAAkAAIAAAAAAAAAAAAlAPz/AAAAAAAAAAAlAP3/AAAAAAAAAAAlAP7/AAAAAAAAAAAlAP//AAAAAAAAAAAlAAAAAAAAAAAAAAAlAAEAAAAAAAAAAAAlAAIAAAAAAAAAAAD//wkAAAACAAIAAAD//woAAAACAAIAAAD//wsAAAACAAIAAAAeAAgAAAACAAEAAAAeAAkAAAAAAAIAAAAeAAoAAAACAAEAAAAeAAsAAAAAAAIAAAAeAAwAAAAAAAIAAAAbAA0AAAACAAIAAAAcAA0AAAACAAIAAAAdAA0AAAACAAIAAAAeAA0AAAACAAIAAAAgAAwAAAACAAIAAAAgAA0AAAACAAIAAAAgAA4AAAACAAIAAAAQAAgAAAADAAAAAAARAAgAAAACAAIAAAASAAgAAAACAAIAAAARAAQAAAACAAIAAAASAAQAAAADAAAAAAATAAQAAAADAAAAAAAUAAQAAAACAAIAAAA=")

[node name="scenes" parent="Node2D" instance=ExtResource("2_qv2r3")]
use_parent_material = true
tile_map_data = PackedByteArray("AAAfAAEAAAAAAAAAAwAfAAIAAAAAAAAAAwAfAAMAAAAAAAAAAwAfAAQAAAAAAAAAAwAfAAUAAAAAAAAAAwAfAAYAAAAAAAAAAwAfAAcAAAAAAAAAAwAfAAgAAAAAAAAAAwAfAAkAAAAAAAAAAwAfAAoAAAAAAAAAAwAfAAsAAAAAAAAAAwAfAAwAAAAAAAAAAwAfAA0AAAAAAAAAAwAfAA4AAAAAAAAAAwAfAP7/AAAAAAAAAwAfAP//AAAAAAAAAwAfAAAAAAAAAAAAAwA=")

[node name="Chicken" parent="Node2D" instance=ExtResource("4_1tslf")]
use_parent_material = true
position = Vector2(981, 100)
dir = -1

[node name="gate" parent="Node2D" instance=ExtResource("4_mr3nd")]
position = Vector2(281, 542)
rotation = -1.51677
scale = Vector2(1, 1.065)

[node name="button" parent="Node2D" node_paths=PackedStringArray("target") instance=ExtResource("5_qcqcb")]
position = Vector2(982, 100)
target = NodePath("../gate")

[node name="head" parent="." instance=ExtResource("3_3i20d")]
position = Vector2(20, 420)
length = 9

[node name="Area2D" type="Area2D" parent="." groups=["wall"]]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(1179, 94)
shape = SubResource("RectangleShape2D_6krh5")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Area2D"]
position = Vector2(981, 94)
shape = SubResource("RectangleShape2D_6krh5")

[node name="cloudspawn" type="Node2D" parent="."]
z_index = -3
script = SubResource("GDScript_eei3c")

[node name="Timer" type="Timer" parent="cloudspawn"]
wait_time = 5.0
autostart = true

[node name="Node2D2" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(774, 252)

[node name="Node2D3" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(1162, 524)

[node name="Node2D4" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(350, 202)

[node name="Node2D5" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(350, 570)

[node name="Node2D6" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(766, 456)

[node name="Node2D7" parent="cloudspawn" instance=ExtResource("5_7fav6")]
visible = false
z_index = -115
position = Vector2(542, 130)

[node name="background" parent="." instance=ExtResource("8_xdp5w")]
z_index = -1005

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -1
material = SubResource("ShaderMaterial_qf070")
offset_left = -28.0
offset_top = -52.0
offset_right = 1310.0
offset_bottom = 770.0
color = Color(0.737603, 0.737603, 0.737603, 0.435294)

[connection signal="timeout" from="cloudspawn/Timer" to="cloudspawn" method="_on_timer_timeout"]
